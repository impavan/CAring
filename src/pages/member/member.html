<div>

    <header></header>
</div>




<ion-content class="mainCont">

    <div class="memberContainer">
    
        <div class="row">
            <div class="col">
                <img src="assets/img/card_regular.png" alt="" class="mt30">
            </div>
            <div class="col" text-center>
                <div class="barcode">
                    <svg #barcode id="barcode"></svg>
                </div>
            </div>
        </div>

        <ion-toolbar>
            <ion-segment [(ngModel)]="member" color="secondary">
                <ion-segment-button value="My Points">
                    My Points
                </ion-segment-button>
                <ion-segment-button value="My Wallet" (click)="loadMyWallet()">
                    My Wallet
                </ion-segment-button>
                <ion-segment-button value="My Profile">
                    My Profile
                </ion-segment-button>
            </ion-segment>
        </ion-toolbar>
        <div [ngSwitch]="member">
            <!-- Section for My Points -->
            <ion-list *ngSwitchCase="'My Points'">
                <div *ngIf="_auth" class="myPointsContainer">
                    <p class="urPoints">Your Points:
                        <strong>{{_totalAvailablePoints}}</strong>

                    </p>
                    <section>
                        <ul *ngFor="let transaction of _transactionList" class="listMyPoints">
                            <li *ngIf="transaction?.transaction_earning">
                                <label for="">Points Earned at <b>{{transaction?.store_name}}</b></label>
                                <span>{{transaction?.billing_time | date:'dd MMM yyyy hh:mm a'}} <br> Receipt Amount : {{transaction?.amount }}</span>
                                <b class="amount_display"> + {{transaction?.points_issued | round }}</b>
                            </li>
                            <li *ngIf="!transaction?.transaction_earning">
                                <label for="">Points Redeemed</label>
                                <span>{{transaction?.billing_time | date:'dd MMM yyyy hh:mm a'}}</span>
                                <b class="amount_display"> - {{transaction?.points_spent | round }}</b>
                            </li>
                        </ul>
                    </section>
                </div>
                <ion-card *ngIf="!_auth" class="myPointsContainer sec">
                    <p class="urPoints">You have no points yet</p>
                    <button ion-button value="Earn Points">Earn Points</button>

                </ion-card>

            </ion-list>
            <!-- Startssssssssssssssssssssssssssssssssssss -->
            <ion-list *ngSwitchCase="'My Wallet'">
                <div *ngIf="_auth" class="subSegmentOut">
                    <ion-toolbar>
                        <ion-segment [(ngModel)]="memberDetails" color="secondary">
                            <ion-segment-button value="New">New</ion-segment-button>
                            <ion-segment-button value="Used">Used</ion-segment-button>
                            <ion-segment-button value="Expired">Expired</ion-segment-button>
                        </ion-segment>
                    </ion-toolbar>
                </div>
                <ion-card *ngIf="!_auth" class="myPointsContainer sec">
                    <p class="urPoints">Your wallet is empty</p>
                    <button ion-button value="Redeem Vouchers" (click)="emptywallet()">Redeem Vouchers</button>
                </ion-card>
                <!--test-->
                <div [ngSwitch]="memberDetails">
                    <!-- New section starts. -->
                    <ion-list *ngSwitchCase="'New'">
                        <div class="alert" *ngIf="redeemedRewards.length <= 0">
                            No New Vouchers available!
                        </div>
                        <div class="newContainer" *ngIf="redeemedRewards">

                            <ion-card>
                                <ion-grid *ngFor="let reward of redeemedRewards | unique:'ExperienceId'" (click)="goto('RedeemPage', reward?.ExperienceId)">
                                    <div class="content" *ngIf="reward.RedeemStatus == 0 && reward.ExpiryDate >= currentDate">

                                        <!--<ion-row class="customRow">
                                            <ion-col col-7>
                                                <figure>
                                                    <img src="{{reward?.images[0]}}" />
                                                </figure>
                                            </ion-col>
                                            <ion-col col-5>
                                                <p class="voucher">{{reward.Title}}</p>
                                                <div>
                                                    <p>{{getRedeemed(reward?.ExperienceId)}}</p>
                                                </div>
                                            </ion-col>
                                        </ion-row>-->

                                        <article>
                                            <ion-grid>
                                                <ion-row class="first">
                                                    <ion-col col-5>
                                                        <figure>
                                                            <img src="{{reward?.images[0]}}" />
                                                        </figure>
                                                    </ion-col>
                                                    <ion-col col-7>
                                                        <h6>{{reward.Title}}</h6>
                                                        <span> <ion-icon class="iconc-ticket"></ion-icon> {{getRedeemed(reward?.ExperienceId)}} available </span>
                                                    </ion-col>
                                                </ion-row>
                                            </ion-grid>
                                        </article>


                                    </div>
                                </ion-grid>
                            </ion-card>
                        </div>
                    </ion-list>
                    <!-- Used section starts. -->
                    <ion-list *ngSwitchCase="'Used'">
                        <div class="alert" *ngIf="redeemedRewards.length <= 0">
                            No Used Vouchers to display
                        </div>
                        <div class="newContainer">
                            <ion-card>
                                <ion-grid *ngFor="let reward of redeemedRewards | unique:'ExperienceId'" (click)="goto('RedeemPage', reward?.ExperienceId)">
                                    <div class="content" *ngIf="reward.RedeemStatus == 1">
                                        <article>
                                            <ion-grid>
                                                <ion-row class="first">
                                                    <ion-col col-5>
                                                        <figure>
                                                            <img src="{{reward?.images[0]}}" />
                                                        </figure>
                                                    </ion-col>
                                                    <ion-col col-7>
                                                        <h6>{{reward.Title}}</h6>
                                                           <span> <ion-icon class="iconc-ticket"></ion-icon> {{getUsedVouchersCount(reward?.ExperienceId)}} used </span>
                                                    </ion-col>
                                                </ion-row>
                                            </ion-grid>
                                        </article>

                                    </div>
                                </ion-grid>
                            </ion-card>
                        </div>

                    </ion-list>
                    <!-- Expired section starts. -->
                    <ion-list *ngSwitchCase="'Expired'">
                        <div class="alert" *ngIf="redeemedRewards.length <= 0">
                            No Expired Vouchers to display
                        </div>
                        <div class="newContainer">
                            <ion-card>
                                <ion-grid *ngFor="let reward of redeemedRewards | unique:'ExperienceId'" (click)="goto('RedeemPage', reward?.ExperienceId)">
                                    <div class="content" *ngIf="reward.RedeemStatus == 0 && reward.ExpiryDate <= currentDate">
                                        <article>
                                            <ion-grid>
                                                <ion-row class="first">
                                                    <ion-col col-5>
                                                        <figure>
                                                            <img src="{{reward?.images[0]}}" />
                                                        </figure>
                                                    </ion-col>
                                                    <ion-col col-7>
                                                        <h6>{{reward.Title}}</h6>
                                                        <span class="danger"> Expired - {{reward.ExpiryDate}} </span>
                                                    </ion-col>
                                                </ion-row>
                                            </ion-grid>
                                        </article>

                                    </div>
                                </ion-grid>
                            </ion-card>
                        </div>
                    </ion-list>
                </div>
            </ion-list>
            <!-- Endssssssssssssssssssssssssssssssss -->
            <ion-list *ngSwitchCase="'My Profile'">
                <div class="myProfileContainer">
                    <div *ngIf="_auth" class="container">
                        <div class="content">
                            <ion-list>
                                <ion-item>
                                    <ion-label fixed>Name</ion-label>
                                    <ion-input type="text" [(ngModel)]="_userName" placeholder="Enter Name"></ion-input>
                                </ion-item>
                                <ion-item>
                                    <ion-label fixed>E-mail</ion-label>
                                    <ion-input type="text" readonly [(ngModel)]="_emailId" placeholder="Enter E-mail"></ion-input>
                                </ion-item>
                                <ion-item>
                                    <ion-label fixed>Mobile Number</ion-label>
                                    <ion-input type="text" readonly [(ngModel)]="_mobileNum"></ion-input>
                                </ion-item>

                            </ion-list>
                            <div class="mt20">
                                <button ion-button class="btn4" (click)="updateProfile()">Update</button>
                          </div>
                        </div>
                    </div>
                </div>
            </ion-list>
        </div>
    </div>
</ion-content>

<ion-footer>
    <ion-toolbar>
        <page-tabs></page-tabs>
    </ion-toolbar>
</ion-footer>






<!--<ion-content class="mainCont">
    <div class="memberContainer">
        <div class="row">
            <div class="col">
                <img src="assets/img/card_regular.png" alt="" class="mt30">
            </div>
            <div class="col" text-center>
                <div class="barcode">
                    <svg #barcode id="barcode"></svg>
                </div>
            </div>
        </div>

        <ion-toolbar>
            <ion-segment [(ngModel)]="member" color="secondary">
                <ion-segment-button value="My Points">
                    My Points
                </ion-segment-button>
                <ion-segment-button value="My Wallet" (click)="loadMyWallet()">
                    My Wallet
                </ion-segment-button>
                <ion-segment-button value="My Profile">
                    My Profile
                </ion-segment-button>
            </ion-segment>
        </ion-toolbar>
        <div [ngSwitch]="member">
            <! Section for My Points -->
<!--<ion-list *ngSwitchCase="'My Points'">
                <div *ngIf="_auth" class="myPointsContainer">
                    <p class="urPoints">Your Points:
                        <strong>{{_totalAvailablePoints}}</strong>

                    </p>-->

<!-- <section class="pointscard"> -->


<!-- <section> -->
<!--<ion-card clickable (click)="togglePoint()">
                        <ion-card-content>
                            <ion-list>
                                <ion-item class="listdisp">
                                    <ion-list *ngFor="let transaction of _transactionList">
                                        <ion-item *ngIf="transaction?.transaction_earning=='false'">
                                            <ion-grid>
                                                <ion-row>
                                                    <ion-col>
                                                        Point Balance :
                                                    </ion-col>
                                                    <ion-col>
                                                        9361
                                                    </ion-col>
                                                </ion-row>
                                                <ion-row>
                                                    <ion-col>
                                                        Expired Points within 1 month:
                                                    </ion-col>
                                                    <ion-col>
                                                        400
                                                    </ion-col>
                                                </ion-row>
                                            </ion-grid>-->
<!-- <ion-grid>
										<ion-row>
											<ion-col>
												Receipt No :
											</ion-col>
											<ion-col>
												Date :
											</ion-col>
											<ion-col>
												Receipt Amount :
											</ion-col>
										</ion-row>
										</ion-grid>					 -->
<!--</ion-item>
                                        <ion-item>
                                            <ion-item *ngIf="transaction?.transaction_earning=='true'">
                                                <p>Reciept No : 1231276</p>
                                                <p>Date :25/9/2017 , 6.30 PM</p>
                                                <p>Receipt Amount : 550</p>
                                                <p style="float: right;position: relative;bottom: 40px;">
                                                    <span>+200 Points</span>
                                                </p>

                                            </ion-item>
                                        </ion-item>
                                        <ion-item>
                                            <ion-item *ngIf="transaction?.transaction_earning=='true'">
                                                <p>Reciept No : 1231276</p>
                                                <p>Date :25/9/2017 , 6.30 PM</p>
                                                <p>Receipt Amount : 550</p>
                                                <p style="float: right;position: relative;bottom: 40px;">
                                                    <span>+200 Points</span>
                                                </p>

                                            </ion-item>
                                        </ion-item>
                                        <ion-item>
                                            <ion-item *ngIf="transaction?.transaction_earning=='true'">
                                                <p>Reciept No : 1231276</p>
                                                <p>Date :25/9/2017 , 6.30 PM</p>
                                                <p>Receipt Amount : 550</p>
                                                <p style="float: right;position: relative;bottom: 40px;">
                                                    <span>+200 Points</span>
                                                </p>

                                            </ion-item>

                                            <ion-list *ngFor="let transaction of _transactionList">
                                                <ion-item *ngIf="transaction?.transaction_earning=='false'">
                                                    <p>
                                                        <span>Point Balance :</span>
                                                        <span>9361</span>
                                                    </p>
                                                    <p>
                                                        <span>Expired Points within one month:</span>
                                                        <span>400</span>
                                                    </p>
                                                </ion-item>
                                                <ion-item *ngIf="transaction?.transaction_earning=='true'">
                                                    <p>Reciept No</p>
                                                    <p>Date</p>
                                                    <p>Receipt Amount</p>
                                                    <p>
                                                        <span>+200 Points</span>
                                                    </p>
                                                </ion-item>
                                            </ion-list>
                                        </ion-item>
                                    </ion-list>
                                </ion-item>
                            </ion-list>

                        </ion-card-content>
                    </ion-card>-->
<!-- </section> -->

<!--</div>
                <ion-card *ngIf="!_auth" class="myPointsContainer sec">
                    <p class="urPoints">You have no points yet</p>
                    <button ion-button value="Earn Points">Earn Points</button>
                </ion-card>
            </ion-list>-->
<!-- Startssssssssssssssssssssssssssssssssssss -->
<!--<ion-list *ngSwitchCase="'My Wallet'">
                <div *ngIf="_auth" class="subSegmentOut">
                    <ion-toolbar>
                        <ion-segment [(ngModel)]="memberDetails" color="secondary">
                            <ion-segment-button value="New">New</ion-segment-button>
                            <ion-segment-button value="Used">Used</ion-segment-button>
                            <ion-segment-button value="Expired">Expired</ion-segment-button>
                        </ion-segment>
                    </ion-toolbar>
                </div>
                <ion-card *ngIf="!_auth" class="myPointsContainer sec">
                    <p class="urPoints">Your wallet is empty</p>
                    <button ion-button value="Redeem Vouchers" (click)="emptywallet()">Redeem Vouchers</button>
                </ion-card>-->


<!--<div [ngSwitch]="memberDetails">-->
<!-- New section starts. -->
<!--<ion-list *ngSwitchCase="'New'">
                        <div class="newContainer">

                <div [ngSwitch]="memberDetails">
                    <!-- New section starts. -->


<!-- Used section starts. -->
<!--<ion-list *ngSwitchCase="'Used'">

                    </ion-list>
                    <!-- Used section starts. -->

<!-- Expired section starts. -->
<!--<ion-list *ngSwitchCase="'Expired'">

                    </ion-list>
                    <!-- Expired section starts. -->

<!-- Endssssssssssssssssssssssssssssssss -->
<!--<ion-list *ngSwitchCase="'My Profile'">
                <div class="myProfileContainer">
                    <div *ngIf="_auth" class="container">
                        <div class="content">
                            <ion-list>
                                <ion-item>
                                    <ion-label fixed>Name</ion-label>
                                    <ion-input type="text" [(ngModel)]="_userName" placeholder="Enter Name"></ion-input>
                                </ion-item>
                                <ion-item>
                                    <ion-label fixed>E-mail</ion-label>
                                    <ion-input type="text" readonly [(ngModel)]="_emailId" placeholder="Enter E-mail"></ion-input>
                                </ion-item>
                                <ion-item>
                                    <ion-label fixed>Mobile Number</ion-label>
                                    <ion-input type="text" readonly [(ngModel)]="_mobileNum"></ion-input>
                                </ion-item>

                            </ion-list>
                        </div>
                    </div>
                </div>
            </ion-list>
        </div>
    </div>
</ion-content>

<ion-footer>
    <ion-toolbar>
        <page-tabs></page-tabs>
    </ion-toolbar>
</ion-footer>-->